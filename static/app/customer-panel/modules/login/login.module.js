angular.module("loginModule",["constantModule","satellizer","toastr","cgBusy"]).controller("loginCtrl",["$scope","$http","URL","mainURL","$state","$stateParams","$auth","toastr",function(e,t,o,a,r,n,s,i){s.isAuthenticated()&&r.go("main.dashboard"),e.login={},e.register={user_level:"user",status:"inactive"},e.loginNow=function(a){e.load=t({url:o.login,method:"POST",data:a}).then(function(e){e.data&&(s.setToken(e.data.data.login_token),i.success("Logged in!","Success!"),r.go("main.dashboard",n,{reload:!0}))},function(e){i.error(e.data._error.message,"Error!")})},e.registerNow=function(n){n.city="s",n.age=25,n.gender="male",e.load=t({url:a+o.register,method:"POST",data:[n]}).then(function(e){i.success("Please check your E-Mail!","Successfully Registered!"),setTimeout(function(){r.go("main.home")},500)},function(e){i.error(e.data._error.message,"Error!")})}}]);