angular.module("loginModule",["constantModule","satellizer","toastr","cgBusy"]).controller("loginCtrl",["$scope","$http","URL","mainURL","$state","$stateParams","$auth","toastr",function(e,o,t,a,r,s,n,l){n.isAuthenticated()&&r.go("main.dashboard"),e.login={},e.register={user_level:"user",status:"inactive"},e.loginNow=function(a){e.load=o({url:t.login,method:"POST",data:a}).then(function(e){e.data&&(n.setToken(e.data.data.login_token),l.success("Logged in!","Success!"),r.go("main.dashboard",s,{reload:!0}))},function(e){console.log("error",e),l.error(e.data._error.message,"Error!")})},e.registerNow=function(s){s.city="s",s.age=25,s.gender="male",e.load=o({url:a+t.register,method:"POST",data:[s]}).then(function(e){console.log("asdasdasdass",e),l.success("Please check your E-Mail!","Successfully Registered!"),setTimeout(function(){r.go("main.home")},500)},function(e){console.log("error",e),l.error(e.data._error.message,"Error!")})}}]);