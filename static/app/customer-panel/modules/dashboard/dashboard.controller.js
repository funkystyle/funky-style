angular.module("dashboardModule",["headerModule","APP","satellizer","toastr","Directives"]).controller("dashboardCtrl",["$scope","auth","$auth","$state","$http","toastr","$sce",function(o,t,e,r,a,n,s){console.log("dashboard controller!"),e.isAuthenticated()?setTimeout(function(){console.log(o.user);var t=JSON.stringify({fav_stores:1,fav_coupons:1}),r="/api/1.0/persons/"+o.user._id+"?embedded="+t+"&r="+Math.random();a({url:r,method:"GET",headers:{authorization:e.getToken()}}).then(function(t){console.log("Dashboard Looged User Data: ",t.data),o.user=t.data},function(o){console.log(o)})},1e3):r.go("main.login"),o.trustAsHtml=function(o){if(o)return s.trustAsHtml(o)},o.logout=function(){e.isAuthenticated()&&a({url:"/api/1.0/auth/logout",method:"GET"}).then(function(o){console.log(o),e.logout(),n.success("Successfully Logged out!","Hey!"),r.go("main.login")},function(o){console.log(o),n.error(o.data.error,"Error")})}}]);