var blog=angular.module("blogModule",[]).directive("blogTile",function(){return{restrict:"E",scope:{items:"=",nClass:"@"},templateUrl:"static/app/customer-panel/modules/blog/blog.tile.template.html",controller:["$scope","$state","$sce",function(t,e,o){console.log("Blog tile controller"),t.trustAsHtml=function(t,e){if(t)return t=t.substr(0,e)+" ...",o.trustAsHtml(t)}}]}}).controller("blogHeaderCtrl",["$scope","$http","$state","$filter","Query","$sce",function(t,e,o,l,n,r){console.log("blog Header Controller!"),t.blogs=[],t.categories=[],t.trustAsHtml=function(t,e){if(t)return t=t.length>e?t.substr(0,e)+" ...":t.substr(0,e),r.trustAsHtml(t)},t.top_banner={};var i="/api/1.0/banner?where="+JSON.stringify({top_banner_string:"blog"});n.get(i).then(function(e){console.log("banner Details: ",e.data._items),t.top_banner=e.data._items[0]}),i="/api/1.0/blog/?embedded="+JSON.stringify({last_modified_by:1,related_categories:1})+"&max_results=7",n.get(i).then(function(e){console.log("Blog List: ",e.data._items),t.blogs=e.data._items,angular.forEach(t.blogs,function(e){e._updated=new Date(e._updated),angular.forEach(e.related_categories,function(o){0==l("filter")(t.categories,{_id:o._id}).length&&(o.blog={url:e.url,title:e.title},t.categories.push(o))})}),console.log("Final Categories: ",t.categories),setTimeout(function(){$("#myCarousel").carousel({interval:!1,looop:!1}),$(".fdi-Carousel .item").each(function(t,e){0==t&&$(this).addClass("active");var o=$(this).next();o.length||(o=$(this).siblings(":first")),o.children(":first-child").clone().appendTo($(this)),o.next().length>0?o.next().children(":first-child").clone().appendTo($(this)):$(this).siblings(":first").children(":first-child").clone().appendTo($(this))})},1e3)})}]).factory("Query",["$http","$q",function(t,e){return{get:function(o){var l=e.defer();return t({url:o+"&r="+Math.random(),method:"GET"}).then(function(t){l.resolve(t)},function(t){l.reject(t)}),l.promise}}}]);