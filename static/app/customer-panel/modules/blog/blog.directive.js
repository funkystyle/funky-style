var blog=angular.module("blogModule",[]).directive("blogTile",function(){return{restrict:"E",scope:{items:"=",nClass:"@"},templateUrl:"static/app/customer-panel/modules/blog/blog.tile.template.html",controller:["$scope","$state","$sce",function(e,t,n){console.log("Blog tile controller"),e.trustAsHtml=function(e,t){if(e)return e=e.substr(0,t)+" ...",n.trustAsHtml(e)}}]}}).controller("blogHeaderCtrl",["$scope","$http","$state","$filter","Query","$sce",function(e,t,n,r,o,i){console.log("blog Header Controller!"),e.blogs=[],e.categories=[],e.trustAsHtml=function(e,t){if(e)return e=e.length>t?e.substr(0,t)+" ...":e.substr(0,t),i.trustAsHtml(e)},e.top_banner={};var l=JSON.stringify({top_banner_string:"blog",expired_date:{$gte:(new Date).toGMTString()}}),s="/api/1.0/banner?where="+l;o.get(s).then(function(t){console.log("banner Details: ",t.data._items),e.top_banner=t.data._items[0]}),e.side_banner={},s="/api/1.0/banner?where="+(l=JSON.stringify({side_banner_string:"blog",expired_date:{$gte:(new Date).toGMTString()}})),o.get(s).then(function(t){console.log("banner Details: ",t.data._items),e.side_banner=t.data._items[0]}),s="/api/1.0/blog/?embedded="+JSON.stringify({last_modified_by:1,related_categories:1})+"&max_results=7",o.get(s).then(function(t){console.log("Blog List: ",t.data._items),e.blogs=t.data._items,angular.forEach(e.blogs,function(t){t._updated=new Date(t._updated),angular.forEach(t.related_categories,function(n){0===r("filter")(e.categories,{_id:n._id}).length&&(n.blog={url:t.url,title:t.title},e.categories.push(n))})}),console.log("Final Categories: ",e.categories),setTimeout(function(){$("#myCarousel").carousel({interval:!1,looop:!1}),$(".fdi-Carousel .item").each(function(e,t){0===e&&$(this).addClass("active");var n=$(this).next();n.length||(n=$(this).siblings(":first")),n.children(":first-child").clone().appendTo($(this)),n.next().length>0?n.next().children(":first-child").clone().appendTo($(this)):$(this).siblings(":first").children(":first-child").clone().appendTo($(this))})},1e3)})}]).factory("Query",["$http","$q",function(e,t){return{get:function(n){var r=t.defer();return e({url:n+"&r="+Math.random(),method:"GET"}).then(function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}}]);