var blog=angular.module("blogModule",[]).directive("blogTile",function(){return{restrict:"E",scope:{items:"=",nClass:"@"},templateUrl:"static/app/customer-panel/modules/blog/blog.tile.template.html",controller:["$scope","$state","$sce",function(t,e,r){t.trustAsHtml=function(t,e){if(t)return t=t.substr(0,e)+" ...",r.trustAsHtml(t)}}]}}).controller("blogHeaderCtrl",["$scope","$http","$state","$filter","Query","$sce",function(t,e,r,n,i,s){t.blogs=[],t.categories=[],t.trustAsHtml=function(t,e){if(t)return t=t.length>e?t.substr(0,e)+" ...":t.substr(0,e),s.trustAsHtml(t)},t.top_banner={};var l="/api/1.0/banner?where="+JSON.stringify({top_banner_string:"blog"});i.get(l).then(function(e){t.top_banner=e.data._items[0]}),l="/api/1.0/blog/?embedded="+JSON.stringify({last_modified_by:1,related_categories:1})+"&max_results=7",i.get(l).then(function(e){t.blogs=e.data._items,angular.forEach(t.blogs,function(e){e._updated=new Date(e._updated),angular.forEach(e.related_categories,function(r){0==n("filter")(t.categories,{_id:r._id}).length&&(r.blog={url:e.url,title:e.title},t.categories.push(r))})}),setTimeout(function(){$("#myCarousel").carousel({interval:!1,looop:!1}),$(".fdi-Carousel .item").each(function(t,e){0==t&&$(this).addClass("active");var r=$(this).next();r.length||(r=$(this).siblings(":first")),r.children(":first-child").clone().appendTo($(this)),r.next().length>0?r.next().children(":first-child").clone().appendTo($(this)):$(this).siblings(":first").children(":first-child").clone().appendTo($(this))})},1e3)})}]).factory("Query",["$http","$q",function(t,e){return{get:function(r){var n=e.defer();return t({url:r+"&r="+Math.random(),method:"GET"}).then(function(t){n.resolve(t)},function(t){n.reject(t)}),n.promise}}}]);