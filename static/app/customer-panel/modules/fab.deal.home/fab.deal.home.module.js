angular.module("allDealsModule",["Directives"]).controller("allDealsCtrl",["$scope","$state","$stateParams","$http","SEO","$rootScope",function(e,t,a,n,r,i){e.deals=[],e.deal_categories=[],e.deal_brands=[],e.stores=[];var s=(new Date).getDate();n({url:"/api/1.0/deal_categories?max_results=4&rand="+s,method:"GET"}).then(function(t){e.deal_categories=t.data._items},function(e){}),n({url:"/api/1.0/deal_brands?max_results=8&rand="+s,method:"GET"}).then(function(t){e.deal_brands=t.data._items},function(e){}),n({url:"/api/1.0/deals?rand_number="+s,method:"GET"}).then(function(t){t.data&&(e.deals=t.data._items)},function(e){});var o={};o.featured_store=!0;var l={};l.name=1,l.url=1,l.image=1,l.menu=1,n({url:"/api/1.0/stores/?where="+JSON.stringify(o)+"&max_results=8&projection="+JSON.stringify(l)+"&rand_number"+(new Date).getTime(),mathod:"GET"}).then(function(t){t.data&&(e.stores=t.data._items)},function(e){}),r.getSEO().then(function(e){angular.forEach(e,function(e){if("deal"==e.selection_type.code){var t=r.seo("",e,"deal");i.pageTitle=t.title,i.pageDescription=t.description}})})}]);