angular.module("allDealsModule",["Directives"]).controller("allDealsCtrl",["$scope","$state","$stateParams","$http","SEO","$rootScope",function(e,a,t,o,l,n){console.log("All Deals Controller!"),e.deals=[],e.deal_categories=[],e.deal_brands=[],e.stores=[];var s=(new Date).getDate();o({url:"/api/1.0/deal_categories?max_results=4&rand="+s,method:"GET"}).then(function(a){console.log("Deal Categories are: ",a.data._items),e.deal_categories=a.data._items},function(e){console.log(e)}),o({url:"/api/1.0/deal_brands?max_results=8&rand="+s,method:"GET"}).then(function(a){console.log("Deal Brands are: ",a.data._items),e.deal_brands=a.data._items},function(e){console.log(e)}),o({url:"/api/1.0/deals?rand_number="+s,method:"GET"}).then(function(a){console.log("All deals are: ",a.data._items),a.data&&(e.deals=a.data._items)},function(e){console.log(e)});var r={};r.featured_store=!0;var i={};i.name=1,i.url=1,i.image=1,i.menu=1,o({url:"/api/1.0/stores/?where="+JSON.stringify(r)+"&max_results=8&projection="+JSON.stringify(i)+"&rand_number"+(new Date).getTime(),mathod:"GET"}).then(function(a){console.log(a),a.data&&(e.stores=a.data._items)},function(e){console.log(e)}),l.getSEO().then(function(e){angular.forEach(e,function(e){if("deal"==e.selection_type.code){var a=l.seo("",e,"deal");n.pageTitle=a.title,n.pageDescription=a.description}})})}]);