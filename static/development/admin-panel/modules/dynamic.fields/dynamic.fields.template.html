<link rel="stylesheet" href="/static/app/admin-panel/modules/dynamic.fields/dynamic.fields.css" />

<div class="panel panel-default" style="margin-top: 90px;">
    <div class="panel-heading">
        <div class="row">
            <div class="col-lg-6">
                <h1 style="margin-top: 10px;">
                   Add Dynamic Fields!
                </h1>
            </div> <!-- end col -->
        </div> <!-- end row -->
    </div>

    <div class="panel-body" cg-busy="load">
        <form ng-submit="storeDynamicFilelds(fields)">
            <div class="row">
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="deal_category">Deal Category</label>
                        <ui-select ui-required="true" on-select="selectedCategory($item, $model)" ng-model="fields.deal_category" theme="bootstrap" id="deal_category">
                            <ui-select-match placeholder="Select Deal Category">{{ $select.selected.name }}</ui-select-match>
                            <ui-select-choices repeat="item._id as item in categories | filter: $select.search">
                                <div ng-bind-html="item.name | highlight: $select.search"></div>
                            </ui-select-choices>
                        </ui-select>

                    </div>
                </div>
            </div>
            <div class="row" ng-repeat="item in repeatItems" ng-if="fields.deal_category">
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="fields_name">Field Name</label>
                        <input required type="text" id="fields_name" class="form-control input-md"
                               placeholder="Fields Name" ng-model="item.field_name" autocomplete="off">
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="fields_type">Field Type</label>
                        <ui-select ui-required="true" ng-model="item.field_type" theme="bootstrap" id="fields_type">
                            <ui-select-match placeholder="Select Field type">{{ $select.selected.text }}</ui-select-match>
                            <ui-select-choices repeat="item.code as item in types | filter: $select.search">
                                <div ng-bind-html="item.text | highlight: $select.search"></div>
                            </ui-select-choices>
                        </ui-select>
                    </div>
                </div>
                <div class="col-md-1">
                    <a style="margin-top: 25px;" ng-click="removeField($index)" class="btn btn-link">
                        Remove this Item
                    </a>
                </div>
            </div>
            <div class="row" style="margin-bottom: 20px;" ng-if="fields.deal_category">
                <div class="col-lg-12 col-sm-12">
                    <a ng-click="addOneMoreField()">
                        Add One more field
                    </a>
                </div>
            </div>

            <button type="submit" class="btn btn-md btn-info">Add</button>
        </form>
        <br><br><br><br><br><br>
    </div> <!-- end panel-body -->
</div>